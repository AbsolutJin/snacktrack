<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title>
      <div class="header-content">
        <ion-icon name="options-outline"></ion-icon>
        Lagerorte verwalten
      </div>
    </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  
  <!-- Lagerorte -->
  <div class="segment-content">
    @if (storageLocations$ | async; as storageLocations) {
      @if (storageLocations.length > 0) {
        <ion-list>
          @for (location of storageLocations; track location.location_id) {
            <ion-item>
              <ion-label>
                <h2>{{ location.name }}</h2>
                <p class="item-count-text">
                  Enthält aktuell <span class="count-highlight">{{ getItemCount(location.location_id) }}</span> Produkte
                </p>
              </ion-label>

              <ion-button
                fill="clear"
                color="medium"
                (click)="editStorageLocation(location)"
                slot="end"
              >
                <ion-icon name="create-outline"></ion-icon>
              </ion-button>

              <ion-button
                fill="clear"
                color="danger"
                (click)="deleteStorageLocation(location)"
                slot="end"
              >
                <ion-icon name="trash-outline"></ion-icon>
              </ion-button>
            </ion-item>
          }
        </ion-list>
      } @else {
        <div class="empty-state">
          <ion-icon name="archive-outline" color="medium"></ion-icon>
          <p>Keine Lagerorte vorhanden</p>
        </div>
      }
    }
  </div>


  <!-- Fixed FAB Button für neue Lagerorte -->
  <ion-fab vertical="bottom" horizontal="end" slot="fixed" class="fab-with-tabs">
    <ion-fab-button (click)="addStorageLocation()" color="primary">
      <ion-icon name="add-outline"></ion-icon>
    </ion-fab-button>
  </ion-fab>

</ion-content>