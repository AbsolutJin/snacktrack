<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title>Stammdaten verwalten</ion-title>
  </ion-toolbar>
  <!-- Segment-Bar im Header -->
  <ion-toolbar>
    <ion-segment [(ngModel)]="selectedSegment" (ionChange)="onSegmentChange($event)">
      <ion-segment-button value="storage">
        <ion-icon name="archive-outline"></ion-icon>
        <ion-label>Lagerorte</ion-label>
      </ion-segment-button>
      <ion-segment-button value="categories">
        <ion-icon name="grid-outline"></ion-icon>
        <ion-label>Essenskategorien</ion-label>
      </ion-segment-button>
    </ion-segment>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">

    <!-- Lager -->
    <div *ngIf="selectedSegment === 'storage'" class="segment-content">
      <ion-list *ngIf="storageLocations.length > 0">
        <ion-item *ngFor="let location of storageLocations">
          <ion-label>
            <h2>{{ location.name }}</h2>
            <p>{{ location.color | titlecase }}</p>
          </ion-label>

          <ion-button
            fill="clear"
            color="medium"
            (click)="editItem(location, 'storage')"
            slot="end"
          >
            <ion-icon name="create-outline"></ion-icon>
          </ion-button>

          <ion-button
            fill="clear"
            color="danger"
            (click)="deleteItem(location, 'storage')"
            slot="end"
          >
            <ion-icon name="trash-outline"></ion-icon>
          </ion-button>
        </ion-item>
      </ion-list>

      <div *ngIf="storageLocations.length === 0" class="empty-state">
        <ion-icon name="archive-outline" color="medium"></ion-icon>
        <p>Keine Lagerorte vorhanden</p>
      </div>

      <!-- Add Button für Lager -->
      <ion-fab vertical="bottom" horizontal="end" slot="fixed">
        <ion-fab-button (click)="addItem('storage')" color="primary">
          <ion-icon name="add-outline"></ion-icon>
        </ion-fab-button>
      </ion-fab>
    </div>

    <!-- Kategorien -->
    <div *ngIf="selectedSegment === 'categories'" class="segment-content">
      <ion-list *ngIf="foodCategories.length > 0">
        <ion-item *ngFor="let category of foodCategories">
          <ion-icon
            [name]="category.icon"
            [color]="category.color"
            slot="start"
          >
          </ion-icon>

          <ion-label>
            <h2>{{ category.name }}</h2>
            <p>{{ category.color | titlecase }}</p>
          </ion-label>

          <ion-button
            fill="clear"
            color="medium"
            (click)="editItem(category, 'category')"
            slot="end"
          >
            <ion-icon name="create-outline"></ion-icon>
          </ion-button>

          <ion-button
            fill="clear"
            color="danger"
            (click)="deleteItem(category, 'category')"
            slot="end"
          >
            <ion-icon name="trash-outline"></ion-icon>
          </ion-button>
        </ion-item>
      </ion-list>

      <div *ngIf="foodCategories.length === 0" class="empty-state">
        <ion-icon name="grid-outline" color="medium"></ion-icon>
        <p>Keine Essenskategorien vorhanden</p>
      </div>

      <!-- Add Button für Kategorien -->
      <ion-fab vertical="bottom" horizontal="end" slot="fixed">
        <ion-fab-button (click)="addItem('category')" color="primary">
          <ion-icon name="add"></ion-icon>
        </ion-fab-button>
      </ion-fab>
    </div>

</ion-content>