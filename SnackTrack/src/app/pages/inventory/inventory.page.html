<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>K√ºche ‚Äì Inventar</title>
  <link rel="stylesheet" href="C:\Users\Michael\Documents\vs projects\snacktrack\SnackTrack\src\app\pages\inventory\inventory.page.css" />
</head>
<body>

  <!-- Obere Leiste -->
  <header class="topbar">
    <button class="icon-btn" id="filterBtn" aria-label="Filter">
      <!-- Filter-Icon -->
      <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M3 4h18v2l-7 7v5l-4 2v-7L3 6V4z"/></svg>
    </button>

    <h1 class="topbar__title">K√ºche</h1>

    <div class="topbar__actions">
      <button class="icon-btn" id="addBtn" aria-label="Item hinzuf√ºgen">
        <!-- Plus-Icon -->
        <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M11 11V5h2v6h6v2h-6v6h-2v-6H5v-2h6z"/></svg>
      </button>

      <button class="icon-btn" id="searchToggle" aria-label="Suche">
        <!-- Lupe -->
        <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M15.5 14h-.79l-.28-.27A6.5 6.5 0 1 0 14 15.5l.27.28v.79L20 21.5 21.5 20l-6-6zm-6 0A4.5 4.5 0 1 1 14 9.5 4.5 4.5 0 0 1 9.5 14z"/></svg>
      </button>
    </div>
  </header>

  <!-- Ausklappbare Suche -->
  <section class="searchbar" id="searchbar" hidden>
    <input type="search" id="searchInput" placeholder="Suche im Inventar‚Ä¶" autocomplete="off" />
    <button class="btn" id="clearSearch">L√∂schen</button>
  </section>

  <!-- Inhalt -->
  <main class="content">
    <!-- Optional: Filter-Hinweis -->
    <div class="filter-chip-row" id="activeFilters" hidden></div>

    <!-- Inventar-Grid -->
    <section class="inventory" id="inventory">
      <!-- Beispiel-Item -->
      <article class="card" data-name="spaghetti">
        <div class="card__imgwrap">
          <img src="spaghetti.jpg" alt="spaghetti" loading="lazy" />
          <span class="card__badge" title="Vorrat">üçù</span>
        </div>

        <h2 class="card__title">spaghetti</h2>

        <div class="card__controls">
          <button class="icon-btn danger" data-action="delete" aria-label="L√∂schen">
            <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M6 7h12l-1 14H7L6 7zm3-3h6l1 2H8l1-2z"/></svg>
          </button>

          <div class="qty" aria-live="polite" aria-atomic="true">
            <span class="qty__value" data-role="count">1</span>
            <span class="qty__unit" data-role="unit">250g</span>
          </div>

          <button class="icon-btn" data-action="add" aria-label="Hinzuf√ºgen">
            <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M11 11V5h2v6h6v2h-6v6h-2v-6H5v-2h6z"/></svg>
          </button>
        </div>
      </article>

      <!-- Dupliziere/erstelle weitere Items nach Bedarf -->
      <article class="card" data-name="reis">
        <div class="card__imgwrap">
          <img src="reis.jpg" alt="reis" loading="lazy" />
        </div>
        <h2 class="card__title">reis</h2>
        <div class="card__controls">
          <button class="icon-btn danger" data-action="delete" aria-label="L√∂schen">
            <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M6 7h12l-1 14H7L6 7zm3-3h6l1 2H8l1-2z"/></svg>
          </button>
          <div class="qty">
            <span class="qty__value" data-role="count">2</span>
            <span class="qty__unit" data-role="unit">500g</span>
          </div>
          <button class="icon-btn" data-action="add" aria-label="Hinzuf√ºgen">
            <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M11 11V5h2v6h6v2h-6v6h-2v-6H5v-2h6z"/></svg>
          </button>
        </div>
      </article>
    </section>
  </main>

  <script>
    // Suche ein-/ausblenden
    const searchToggle = document.getElementById('searchToggle');
    const searchbar = document.getElementById('searchbar');
    const searchInput = document.getElementById('searchInput');
    const clearSearch = document.getElementById('clearSearch');
    const inventory = document.getElementById('inventory');

    searchToggle.addEventListener('click', () => {
      const willShow = searchbar.hasAttribute('hidden');
      if (willShow) {
        searchbar.removeAttribute('hidden');
        searchInput.focus();
      } else {
        searchbar.setAttribute('hidden', '');
        searchInput.value = '';
        filterCards('');
      }
    });

    clearSearch.addEventListener('click', () => {
      searchInput.value = '';
      filterCards('');
      searchInput.focus();
    });

    searchInput.addEventListener('input', (e) => {
      filterCards(e.target.value);
    });

    function filterCards(query) {
      const q = query.trim().toLowerCase();
      [...inventory.querySelectorAll('.card')].forEach(card => {
        const name = (card.dataset.name || '').toLowerCase();
        card.style.display = name.includes(q) ? '' : 'none';
      });
    }

    // Add / Delete Logik (Demo)
    inventory.addEventListener('click', (e) => {
      const btn = e.target.closest('button[data-action]');
      if (!btn) return;
      const card = e.target.closest('.card');
      const countEl = card.querySelector('[data-role="count"]');

      if (btn.dataset.action === 'add') {
        countEl.textContent = String(parseInt(countEl.textContent, 10) + 1);
      }
      if (btn.dataset.action === 'delete') {
        const current = parseInt(countEl.textContent, 10);
        if (current > 1) {
          countEl.textContent = String(current - 1);
        } else {
          // Wenn auf 0, Item entfernen (kannst du anpassen)
          card.remove();
        }
      }
    });

    // Plus in der Topbar f√ºgt ein Demo-Item hinzu
    document.getElementById('addBtn').addEventListener('click', () => {
      const el = document.createElement('article');
      el.className = 'card';
      el.dataset.name = 'neu';
      el.innerHTML = `
        <div class="card__imgwrap">
          <img src="placeholder.jpg" alt="neu" loading="lazy" />
        </div>
        <h2 class="card__title">neu</h2>
        <div class="card__controls">
          <button class="icon-btn danger" data-action="delete" aria-label="L√∂schen">
            <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M6 7h12l-1 14H7L6 7zm3-3h6l1 2H8l1-2z"/></svg>
          </button>
          <div class="qty">
            <span class="qty__value" data-role="count">1</span>
            <span class="qty__unit" data-role="unit">100g</span>
          </div>
          <button class="icon-btn" data-action="add" aria-label="Hinzuf√ºgen">
            <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M11 11V5h2v6h6v2h-6v6h-2v-6H5v-2h6z"/></svg>
          </button>
        </div>`;
      inventory.prepend(el);
    });
  </script>
</body>
</html>
