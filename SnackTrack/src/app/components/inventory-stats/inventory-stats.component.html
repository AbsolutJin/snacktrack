<div class="stats-grid" *ngIf="inventoryStats$ | async as stats">
  <!-- Gesamt-Statistiken -->
  <ion-card class="stat-card">
    <ion-card-content>
      <div class="stat-item">
        <ion-icon name="cube-outline" color="primary" size="large"></ion-icon>
        <div class="stat-info">
          <h2>{{ stats.totalItems }}</h2>
          <p>Gesamt Lebensmittel</p>
        </div>
      </div>
    </ion-card-content>
  </ion-card>

  <ion-card class="stat-card">
    <ion-card-content>
      <div class="stat-item">
        <ion-icon
          name="warning-outline"
          color="warning"
          size="large"
        ></ion-icon>
        <div class="stat-info">
          <h2>{{ stats.expiringSoonCount }}</h2>
          <p>Bald ablaufend</p>
        </div>
      </div>
    </ion-card-content>
  </ion-card>

  <!-- Meist genutzter Lagerplatz -->
  <ion-card class="stat-card featured">
    <ion-card-header>
      <ion-card-subtitle>Meist genutzter Lagerplatz</ion-card-subtitle>
    </ion-card-header>
    <ion-card-content>
      <div class="stat-item">
        <ion-icon
          [name]="stats.mostUsedLocation.icon"
          [color]="stats.mostUsedLocation.color"
          size="large"
        >
        </ion-icon>
        <div class="stat-info">
          <h3>{{ stats.mostUsedLocation.name }}</h3>
          <p>{{ stats.itemsByLocation[stats.mostUsedLocation.id] }} Artikel</p>
        </div>
      </div>
    </ion-card-content>
  </ion-card>

  <!-- Meist genutzte Kategorie -->
  <ion-card class="stat-card featured">
    <ion-card-header>
      <ion-card-subtitle>Beliebteste Kategorie</ion-card-subtitle>
    </ion-card-header>
    <ion-card-content>
      <div class="stat-item">
        <ion-icon
          [name]="stats.mostUsedCategory.icon"
          [color]="stats.mostUsedCategory.color"
          size="large"
        >
        </ion-icon>
        <div class="stat-info">
          <h3>{{ stats.mostUsedCategory.name }}</h3>
          <p>{{ stats.itemsByCategory[stats.mostUsedCategory.id] }} Artikel</p>
        </div>
      </div>
    </ion-card-content>
  </ion-card>

  <!-- Lagerplätze Übersicht -->
  <ion-card class="stat-card full-width">
    <ion-card-header>
      <ion-card-title>Verteilung nach Lagerplätzen</ion-card-title>
    </ion-card-header>
    <ion-card-content>
      <div class="location-distribution">
        <div
          *ngFor="
            let location of getStorageLocations();
            trackBy: trackByLocationId
          "
          class="location-item"
        >
          <div class="location-info">
            <ion-icon [name]="location.icon" [color]="location.color">
            </ion-icon>
            <span>{{ location.name }}</span>
          </div>
          <div class="location-count">
            <ion-badge [color]="location.color">
              {{ stats.itemsByLocation[location.id] || 0 }}
            </ion-badge>
          </div>
        </div>
      </div>
    </ion-card-content>
  </ion-card>

  <!-- Kategorien Übersicht -->
  <ion-card class="stat-card full-width">
    <ion-card-header>
      <ion-card-title>Verteilung nach Kategorien</ion-card-title>
    </ion-card-header>
    <ion-card-content>
      <div class="category-distribution">
        <div
          *ngFor="let category of getCategories(); trackBy: trackByCategoryId"
          class="category-item"
        >
          <div class="category-info">
            <ion-icon [name]="category.icon" [color]="category.color">
            </ion-icon>
            <span>{{ category.name }}</span>
          </div>
          <div class="category-count">
            <ion-badge [color]="category.color">
              {{ stats.itemsByCategory[category.id] || 0 }}
            </ion-badge>
          </div>
        </div>
      </div>
    </ion-card-content>
  </ion-card>
</div>
